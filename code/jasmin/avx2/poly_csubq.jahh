#ifndef POLY_CSUBQ_HH
#define POLY_CSUBQ_HH

#include "params.jahh"
#include "reduce.jahh"
#include "consts.jahh"


fn poly_csubq(reg ptr u16[KYBER_N] rp) -> reg ptr u16[KYBER_N]
{
  reg u256 r qx16;
  inline int i;
  
  qx16 = jqx16[u256 0];

  for i=0 to 16 {
    r = rp.[u256 32*i];
    r = csubq(r, qx16);
    rp.[u256 32*i] = r;
  }

  return rp;
}

#endif
